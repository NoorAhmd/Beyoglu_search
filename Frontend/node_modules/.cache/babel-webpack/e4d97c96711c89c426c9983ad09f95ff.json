{"ast":null,"code":"/**\n * @module ol/control/Rotate\n */\nimport Control from '../control/Control.js';\nimport { CLASS_CONTROL, CLASS_HIDDEN, CLASS_UNSELECTABLE } from '../css.js';\nimport { easeOut } from '../easing.js';\nimport { listen } from '../events.js';\nimport EventType from '../events/EventType.js';\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-rotate'] CSS class name.\n * @property {string|HTMLElement} [label='â‡§'] Text label to use for the rotate button.\n * Instead of text, also an element (e.g. a `span` element) can be used.\n * @property {string} [tipLabel='Reset rotation'] Text label to use for the rotate tip.\n * @property {number} [duration=250] Animation duration in milliseconds.\n * @property {boolean} [autoHide=true] Hide the control when rotation is 0.\n * @property {function(module:ol/MapEvent)} [render] Function called when the control should\n * be re-rendered. This is called in a `requestAnimationFrame` callback.\n * @property {function()} [resetNorth] Function called when the control is clicked.\n * This will override the default `resetNorth`.\n * @property {HTMLElement|string} [target] Specify a target if you want the control to be\n * rendered outside of the map's viewport.\n */\n\n/**\n * @classdesc\n * A button control to reset rotation to 0.\n * To style this control use css selector `.ol-rotate`. A `.ol-hidden` css\n * selector is added to the button when the rotation is 0.\n *\n * @api\n */\n\nvar Rotate = function (Control) {\n  function Rotate(opt_options) {\n    var options = opt_options ? opt_options : {};\n    Control.call(this, {\n      element: document.createElement('div'),\n      render: options.render || render,\n      target: options.target\n    });\n    var className = options.className !== undefined ? options.className : 'ol-rotate';\n    var label = options.label !== undefined ? options.label : \"\\u21E7\";\n    /**\n     * @type {HTMLElement}\n     * @private\n     */\n\n    this.label_ = null;\n\n    if (typeof label === 'string') {\n      this.label_ = document.createElement('span');\n      this.label_.className = 'ol-compass';\n      this.label_.textContent = label;\n    } else {\n      this.label_ = label;\n      this.label_.classList.add('ol-compass');\n    }\n\n    var tipLabel = options.tipLabel ? options.tipLabel : 'Reset rotation';\n    var button = document.createElement('button');\n    button.className = className + '-reset';\n    button.setAttribute('type', 'button');\n    button.title = tipLabel;\n    button.appendChild(this.label_);\n    listen(button, EventType.CLICK, this.handleClick_, this);\n    var cssClasses = className + ' ' + CLASS_UNSELECTABLE + ' ' + CLASS_CONTROL;\n    var element = this.element;\n    element.className = cssClasses;\n    element.appendChild(button);\n    this.callResetNorth_ = options.resetNorth ? options.resetNorth : undefined;\n    /**\n     * @type {number}\n     * @private\n     */\n\n    this.duration_ = options.duration !== undefined ? options.duration : 250;\n    /**\n     * @type {boolean}\n     * @private\n     */\n\n    this.autoHide_ = options.autoHide !== undefined ? options.autoHide : true;\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n\n    this.rotation_ = undefined;\n\n    if (this.autoHide_) {\n      this.element.classList.add(CLASS_HIDDEN);\n    }\n  }\n\n  if (Control) Rotate.__proto__ = Control;\n  Rotate.prototype = Object.create(Control && Control.prototype);\n  Rotate.prototype.constructor = Rotate;\n  /**\n   * @param {MouseEvent} event The event to handle\n   * @private\n   */\n\n  Rotate.prototype.handleClick_ = function handleClick_(event) {\n    event.preventDefault();\n\n    if (this.callResetNorth_ !== undefined) {\n      this.callResetNorth_();\n    } else {\n      this.resetNorth_();\n    }\n  };\n  /**\n   * @private\n   */\n\n\n  Rotate.prototype.resetNorth_ = function resetNorth_() {\n    var map = this.getMap();\n    var view = map.getView();\n\n    if (!view) {\n      // the map does not have a view, so we can't act\n      // upon it\n      return;\n    }\n\n    if (view.getRotation() !== undefined) {\n      if (this.duration_ > 0) {\n        view.animate({\n          rotation: 0,\n          duration: this.duration_,\n          easing: easeOut\n        });\n      } else {\n        view.setRotation(0);\n      }\n    }\n  };\n\n  return Rotate;\n}(Control);\n/**\n * Update the rotate control element.\n * @param {module:ol/MapEvent} mapEvent Map event.\n * @this {module:ol/control/Rotate}\n * @api\n */\n\n\nexport function render(mapEvent) {\n  var frameState = mapEvent.frameState;\n\n  if (!frameState) {\n    return;\n  }\n\n  var rotation = frameState.viewState.rotation;\n\n  if (rotation != this.rotation_) {\n    var transform = 'rotate(' + rotation + 'rad)';\n\n    if (this.autoHide_) {\n      var contains = this.element.classList.contains(CLASS_HIDDEN);\n\n      if (!contains && rotation === 0) {\n        this.element.classList.add(CLASS_HIDDEN);\n      } else if (contains && rotation !== 0) {\n        this.element.classList.remove(CLASS_HIDDEN);\n      }\n    }\n\n    this.label_.style.msTransform = transform;\n    this.label_.style.webkitTransform = transform;\n    this.label_.style.transform = transform;\n  }\n\n  this.rotation_ = rotation;\n}\nexport default Rotate; //# sourceMappingURL=Rotate.js.map","map":{"version":3,"sources":["/Users/n.ah/Projects/ankamap/node_modules/ol/control/Rotate.js"],"names":["Control","CLASS_CONTROL","CLASS_HIDDEN","CLASS_UNSELECTABLE","easeOut","listen","EventType","Rotate","opt_options","options","call","element","document","createElement","render","target","className","undefined","label","label_","textContent","classList","add","tipLabel","button","setAttribute","title","appendChild","CLICK","handleClick_","cssClasses","callResetNorth_","resetNorth","duration_","duration","autoHide_","autoHide","rotation_","__proto__","prototype","Object","create","constructor","event","preventDefault","resetNorth_","map","getMap","view","getView","getRotation","animate","rotation","easing","setRotation","mapEvent","frameState","viewState","transform","contains","remove","style","msTransform","webkitTransform"],"mappings":"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","sourcesContent":["/**\n * @module ol/control/Rotate\n */\nimport Control from '../control/Control.js';\nimport {CLASS_CONTROL, CLASS_HIDDEN, CLASS_UNSELECTABLE} from '../css.js';\nimport {easeOut} from '../easing.js';\nimport {listen} from '../events.js';\nimport EventType from '../events/EventType.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-rotate'] CSS class name.\n * @property {string|HTMLElement} [label='â‡§'] Text label to use for the rotate button.\n * Instead of text, also an element (e.g. a `span` element) can be used.\n * @property {string} [tipLabel='Reset rotation'] Text label to use for the rotate tip.\n * @property {number} [duration=250] Animation duration in milliseconds.\n * @property {boolean} [autoHide=true] Hide the control when rotation is 0.\n * @property {function(module:ol/MapEvent)} [render] Function called when the control should\n * be re-rendered. This is called in a `requestAnimationFrame` callback.\n * @property {function()} [resetNorth] Function called when the control is clicked.\n * This will override the default `resetNorth`.\n * @property {HTMLElement|string} [target] Specify a target if you want the control to be\n * rendered outside of the map's viewport.\n */\n\n\n/**\n * @classdesc\n * A button control to reset rotation to 0.\n * To style this control use css selector `.ol-rotate`. A `.ol-hidden` css\n * selector is added to the button when the rotation is 0.\n *\n * @api\n */\nvar Rotate = (function (Control) {\n  function Rotate(opt_options) {\n\n    var options = opt_options ? opt_options : {};\n\n    Control.call(this, {\n      element: document.createElement('div'),\n      render: options.render || render,\n      target: options.target\n    });\n\n    var className = options.className !== undefined ? options.className : 'ol-rotate';\n\n    var label = options.label !== undefined ? options.label : '\\u21E7';\n\n    /**\n     * @type {HTMLElement}\n     * @private\n     */\n    this.label_ = null;\n\n    if (typeof label === 'string') {\n      this.label_ = document.createElement('span');\n      this.label_.className = 'ol-compass';\n      this.label_.textContent = label;\n    } else {\n      this.label_ = label;\n      this.label_.classList.add('ol-compass');\n    }\n\n    var tipLabel = options.tipLabel ? options.tipLabel : 'Reset rotation';\n\n    var button = document.createElement('button');\n    button.className = className + '-reset';\n    button.setAttribute('type', 'button');\n    button.title = tipLabel;\n    button.appendChild(this.label_);\n\n    listen(button, EventType.CLICK, this.handleClick_, this);\n\n    var cssClasses = className + ' ' + CLASS_UNSELECTABLE + ' ' + CLASS_CONTROL;\n    var element = this.element;\n    element.className = cssClasses;\n    element.appendChild(button);\n\n    this.callResetNorth_ = options.resetNorth ? options.resetNorth : undefined;\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.duration_ = options.duration !== undefined ? options.duration : 250;\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.autoHide_ = options.autoHide !== undefined ? options.autoHide : true;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.rotation_ = undefined;\n\n    if (this.autoHide_) {\n      this.element.classList.add(CLASS_HIDDEN);\n    }\n\n  }\n\n  if ( Control ) Rotate.__proto__ = Control;\n  Rotate.prototype = Object.create( Control && Control.prototype );\n  Rotate.prototype.constructor = Rotate;\n\n  /**\n   * @param {MouseEvent} event The event to handle\n   * @private\n   */\n  Rotate.prototype.handleClick_ = function handleClick_ (event) {\n    event.preventDefault();\n    if (this.callResetNorth_ !== undefined) {\n      this.callResetNorth_();\n    } else {\n      this.resetNorth_();\n    }\n  };\n\n  /**\n   * @private\n   */\n  Rotate.prototype.resetNorth_ = function resetNorth_ () {\n    var map = this.getMap();\n    var view = map.getView();\n    if (!view) {\n      // the map does not have a view, so we can't act\n      // upon it\n      return;\n    }\n    if (view.getRotation() !== undefined) {\n      if (this.duration_ > 0) {\n        view.animate({\n          rotation: 0,\n          duration: this.duration_,\n          easing: easeOut\n        });\n      } else {\n        view.setRotation(0);\n      }\n    }\n  };\n\n  return Rotate;\n}(Control));\n\n\n/**\n * Update the rotate control element.\n * @param {module:ol/MapEvent} mapEvent Map event.\n * @this {module:ol/control/Rotate}\n * @api\n */\nexport function render(mapEvent) {\n  var frameState = mapEvent.frameState;\n  if (!frameState) {\n    return;\n  }\n  var rotation = frameState.viewState.rotation;\n  if (rotation != this.rotation_) {\n    var transform = 'rotate(' + rotation + 'rad)';\n    if (this.autoHide_) {\n      var contains = this.element.classList.contains(CLASS_HIDDEN);\n      if (!contains && rotation === 0) {\n        this.element.classList.add(CLASS_HIDDEN);\n      } else if (contains && rotation !== 0) {\n        this.element.classList.remove(CLASS_HIDDEN);\n      }\n    }\n    this.label_.style.msTransform = transform;\n    this.label_.style.webkitTransform = transform;\n    this.label_.style.transform = transform;\n  }\n  this.rotation_ = rotation;\n}\n\nexport default Rotate;\n\n//# sourceMappingURL=Rotate.js.map"]},"metadata":{},"sourceType":"module"}